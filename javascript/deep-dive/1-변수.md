# 변수

## 1. 변수 사용목적

컴퓨터는 피연산자와 연산 결과 모두를 임의의 메모리 공간에 저장한다. 이때 식의 연산 결과를 재사용하기 위해 변수를 사용한다.

만약 변수가 없다면 어떠한 데이터에 접근은 메모리 주소를 통해 이루어져야 하는데 이는 올바른 접근 방법이 아니다. 만약 실수로 운영체제가 사용하는 값을 변경하면 시스템이 멈추는 치명적인 오류가 발생할 수 있다. 또 데이터가 저장될 메모리 공간은 상황에 따라 임의로 결정되어 같은 환경에서 같은 코드를 수행하더라도 실행될 때마다 데이터가 저장된 메모리 주소는 변경된다. 이는 프로그램 실행 시점 이전에는 메모리 저장 공간을 알 수 없음을 뜻한다.

이러한 이유로 자바스크립트는 개발자의 직접적인 메모리 제어를 허용하지 않고 저장된 값을 읽어 들여 재사용하기 위해 변수라는 메커니즘을 제공한다. **변수는 하나의 값을 저장하기 위해 확보한 메모리 공간 자체 또는 그 메모리 공간을 식별하기 위해 붙인 이름을 말한다.** 변수를 사용해 사용자가 메모리 공간에 직접 접근할 필요가 없고 변수를 통해 안전하게 데이터에 접근할 수 있다.

변수에서 메모리 공간에 저장된 값을 식별할 수 있는 고유한 이름을 **변수 이름**이라 하고 변수에 저장된 값을 **변수 값**이라 한다.
변수에 값을 저장하는 것을 **할당**이라 하고, 변수에 저장된 값을 읽어 들이는 것을 **참조**라 한다.

***

## 2. 식별자

변수 이름을 식별자라고 부르기도 한다. **식별자는 어떤 값을 구별해서 식별할 수 있는 고유한 이름을 말한다.**

값은 메모리 공간에 저장된다고 했다. 따라서 식별자는 메모리 공간에 저장되어 있는 어떤 값을 구별해서 식별해낼 수 있어야 한다. 이를 위해 식별자는 어떤 값이 저장되어 있는 메모리 주소를 기억(저장)해야 한다. 즉 **식별자는 값이 아니라 메모리 주소를 기억하고 있다.** 식별자로 값을 구별해서 식별한다는 것은 식별자가 기억하고 있는 메모리 주소를 통해 메모리 공간에 저장된 값에 접근할 수 있다는 의미다.

식별자는 변수 이름에만 사용할 수 있는 용어가 아니라 함수, 클래스 등에서도 사용할 수 있다. 메모리 상에 값을 식별할 수 있는 모든 이름은 식별자라고 부른다.

***

## 3. 변수 선언

변수를 사용하기 위해서는 변수를 생성해야 한다. 변수를 생성하는 과정은 아래와 같다.

> 1. 임의의 공간을 확보하고 그 공간의 이름을 사용할 변수의 이름으로 지정한다.
> 2. 값을 저장할 공간을 확보해 저장하고 주소를 식별자 위치에 저장한다.

변수를 선언해 확보한 공간은 변수의 할당이 해제되기 전까지는 누구도 이 공간을 사용할 수 없도록 보호한다.

변수를 사용하기 위해서는 선언이 필요하다. 자바스크립트에서 변수를 선언하는 키워드는 var, let, const가 있다. 이 키워드를 통해 자바스크립트가 변수를 선언한다는 것을 알 수 있다.

var 키워드를 사용한 변수 선언은 선언과 초기화가 동시에 진행된다. 선언을 통해 메모리에 변수 이름을 등록하고 그 변수의 값으로 undefined를 넣는다. 즉 변수 선언 이후 값을 할당하지 않아도 변수 선언에 의해 확보된 메모리 공간은 비어 있는 것이 아니라 undefined라는 값으로 초기화 됨을 알 수 있다.

초기화란 변수가 선언된 이후 최초로 값을 할당하는 것을 말한다. 초기화 과정을 거치지 않으면 확보한 메모리 공간에 이전에 실행된 애플리케이션이 사용했던 데이터가 남아있을 수 있다. 예상치 못한 값이 나올 수 있고 이를 방지하기 위해 초기화를 수행한다. 자바스크립트의 var 키워드는 암묵적으로 초기화를 수행하므로 이러한 위험으로부터 안전하다.

변수를 선언하지 않고 사용하면 자바스크립트가 ReferenceError(참조 에러)를 발생시킨다. 이는 자바스크립트가 식별자를 찾을 수 없을 때 발생하는 에러이다.

***

## 4. 변수 호이스팅

```javascript
console.log(num);

var num;
```

위 코드의 실행 결과로 ReferenceError가 발생할 것 같지만 undefined라는 값이 정상적으로 출력된다. 그 이유는 변수의 선언 시점이 코드의 실행 시점보다 이전에 이루어지기 때문이다. 자바스크립트 엔진은 인터프리터가 코드를 한 줄씩 읽고 해석해 명령을 수행하는 런타임 시점 이전에 소스코드 평과 과정을 거치고 이때 필요한 식별자의 저장 공간을 미리 확보한다.

즉 자바스크립트 엔진은 식별자의 선언을 다른 어떤 명령보다 우선적으로 실행한다. 따라서 식별자 선언이 어디에 위치하는 지에 상관없이 어디서든지 식별자를 참조할 수 있다.

이처럼 식별자의 선언이 코드의 위쪽으로 끌어 올려진 것처럼 동작하는 것을 호이스팅이라 한다.

***

## 5. 값의 할당

변수에 값을 할당할 때는 대입 연산자 =를 사용한다. 할당 연산자는 우변의 값을 좌변의 변수에 할당한다.

```javascript
var num;
num = 1;

var num = 1;
```

위 두 코드는 동일하게 동작한다. 즉 자바스크립트 엔진은 변수 선언과 값의 할당을 하나의 문으로 단축 표현해도 변수 선언과 값의 할당을 2개의 문으로 나누어 실행한다는 것을 알 수 있다.

**변수 선언은 소스코드가 순차적으로 실행되는 시점인 런타임 이전에 먼저 실행되지만 값의 할당은 소스코드가 순차적으로 실행되는 시점인 런타임에 실행된다.**

***

## 6. 값의 재할당

이미 값이 할당되어 있는 변수에 새로운 값을 할당할 수 있다. 이를 재할당이라 한다.

```javascript
var num = 1;
num = 2;
```

변수의 값을 재할당하면 num에 저장된 1의 값이 2로 변경되는 것이 아니라 새로운 메모리 공간을 확보해 2를 저장하고 그 주소를 num이 있는 메모리 공간에 저장한다. 만약 1의 값이 어떠한 식별자와도 연결되어 있지 않다면 즉, 아무도 사용하지 않는다면 필요하지 않은 값이기 때문에 가비지 콜렉터에 의해 메모리에서 자동 해제된다.

***

## 7. 식별자 네이밍 규칙

식별자 이름을 지정하기 위해선 정해진 규칙을 따라야 한다.

> 1. 식별자는 특수 문자를 제외한 문자, 숫자, _(언더스코어), $(달러)를 사용 가능하다.
> 2. 식별자는 숫자로 시작할 수 없다.
> 3. 예약어(프로그래밍 언어에서 사용되고 있는 이름이거나 사용 예정인 이름을 말한다)는 식별자로 사용할 수 없다.

식별자 이름이 하나 이상의 영어 단어로 구성될 때 가독성을 높이기 위해 사용되는 네이밍 컨벤션이라는 규칙이 있다.

```javascript
// 카멜 케이스
var camelCase;

// 스네이크 케이스
var snake_case;

// 파스칼 케이스
var PascalCase;

// 헝가이언 케이스
var intNum; // type + identifier
var $elem = document.getElementById('elem'); // DOM 노드
var observable$ = fromEvent(document, click);    // RxJS 옵저버블
```

일관성을 유지한다면 어떤 네이밍 컨벤션을 사용해도 괜찮지만 자바스크립트에서는 일반적으로 변수나 함수 이름에는 카멜 케이스를 사용하고 생성자 함수, 클래스의 이름에는 파스칼 케이스를 사용한다. 따라서 코드 전체의 가독성을 높이기 위해선 카멜 케이스와 파스칼 케이스를 따르는 것이 유리하다.
