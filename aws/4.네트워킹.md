# 4. 네트워킹

Amazon Virtual Private Cloud(VPC)를 사용하면 사용자가 정의한 가상 네트워크에서 AWS 리소스를 실행할 수 있는 논리적으로 격리된 AWS 클라우드 섹션을 프로비저닝할 수 있습니다. 이러한 리소스는 인터넷을 통해 일반적으로 접근할 수 있는 퍼블릭 리소스일 수도 있고, 인터넷을 통해 접근할 수 없는 프라이빗 리소스일 수도 있습니다. 일반적으로 데이터베이스나 백엔드 서비스에서 주로 사용합니다.

## AWS와의 연결

Virtual Private Cloud(VPC)는 본질적으로 사용자 고유 프라이빗 네트워크입니다. VPC를 사용하여 AWS 리소스용 프라이빗 IP 범위를 정의하고 EC2 인스턴스나 ELB같은 요소를 배치할 수 있습니다.

리소스를 바로 VPC로 옮기고 작업을 진행하지는 않고 다른 서브넷을 배치하여 작업을 진행합니다. 서브넷은 VPC 내의 IP 주소 모음으로 리소스를 그룹화할 수 있게 합니다. 서브넷은 네트워킹 규칙을 이용하여 리소스를 공개할지 않을지를 제어합니다.

우선 퍼블릭 리소스를 살펴보자면 퍼블릭 VPC에는 사용자가 리소스에 접근할 수 있도록 게이트웨이를 설정해야 합니다. 즉, IGW를 VPC에 연결해야 합니다. 게이트웨이는 고객이 이동할 수 있는 출입구와 같습니다. 게이트웨이가 설정되어있지 않다면 유저는 해당 웹 사이트의 리소스에 접근할 수 없을 것입니다.

프라이빗 리소스는 접근 방식에 상관없이 무조건 보호되어야 하는 리소스입니다. 대신 허용된 네트워크는 접근할 수 있도록 프라이빗 게이트웨이를 프라이빗 VPC에 연결해야 합니다.

이렇게 리소스를 퍼블릭과 프라이빗으로 구분했지만 퍼블릭 프라이빗 리소스로 접근하는 광섬유 네트워크는 하나로 동일합니다. 웹 사이트에 유저가 몰린다면 프라이빗 리소스에 접근할 때에도 네트워크 병목 현상이 발생할 것입니다. 이때 AWS Direct Connect라는 기능을 사용할 수 있습니다. Direct Connect는 완전히 독립된 프라이빗 네트워크를 사용해 다른 사람과 공유되지 않는 오직 나만 사용할 수 있는 비밀 출입구를 만들 수 있습니다.
