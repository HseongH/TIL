# SAP 49번 문제

Q49. 소매업체는 Amazon EC2 인스턴스에서 실행되는 Amazon Elastic Container Service (Amazon ECS) 클러스터에서 비즈니스 크리티컬 웹 서비스를 실행합니다. 웹 서비스는 최종 사용자로부터 POST 요청을 수신하고 별도의 EC2 인스턴스에서 실행되는 MySQL 데이터베이스에 데이터를 씁니다. 회사는 데이터 손실이 발생하지 않도록 해야 합니다.현재 코드 배포 프로세스에는 ECS 서비스의 수동 업데이트가 포함됩니다. 최근 배포 중에 최종 사용자는 유효한 웹 요청에 대한 응답으로 502 Bad Gateway 오류가 간헐적으로 발생했습니다. 이 회사는 이 문제가 반복되는 것을 방지하기 위해 신뢰할 수 있는 솔루션을 구현하고자 합니다. 이 회사는 또한 코드 배포를 자동화하려고 합니다. 솔루션은 가용성이 높아야 하며 비용 효율성을 최적화해야 합니다.
이러한 요구 사항을 충족하는 단계 조합은 무엇입니까?

A.

- Amazon Simple Queue Service (Amazon SQS) 대기열을 이벤트 소스로 구성하여 웹 서비스로부터 POST 요청을 수신합니다. 대기열을 폴링하도록 AWS Lambda 함수를 구성합니다.데이터베이스에 날짜를 기록합니다.
- Fargate 시작 유형이 있는 ECS 클러스터에서 웹 서비스를 실행합니다. AWS CodePipeline 및 AWS CodeDeploy를 사용하여 카나리아 배포를 수행하여 ECS 서비스를 업데이트합니다.

---

소결합된 애플리케이션 구축을 위해 Amazon SQS를 두어 메시지 대기열을 생성합니다. 메시지 대기열에서 요청을 수신하고 요청이 애플리케이션으로 전달될 수 있도록 Lambda 함수를 구성합니다.

배포를 자동으로 수행하기 위해 CodePipeline 및 CodeDeploy를 이용해 CI/CD를 구축합니다. 새로운 운영 서버가 Healthy한지 검증하기 위해 카나리아 배포 방식을 선택합니다.
